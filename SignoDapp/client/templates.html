<template name="modal">
    <!--This is the modal for a catastrophic Error-->
    <div class="modal show animated fadeInUpBig" data-backdrop="static" data-keyboard="false" id="catastrophicError"
         tabindex="-1"
         role="dialog" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header bg-danger">
                    <div class="row">
                        <div class="col">
                            <h3 class="modal-title" id="exampleModalLabel">Abandon Ship!</h3>
                        </div>
                    </div>

                </div>
                <div class="modal-body center-block">
                    <div class="row text-center">
                        <div class="col">
                            <h1><i class="fa fa-5x fa-ship" aria-hidden="true"></i></h1></div>
                    </div>
                    <div class="row">
                        <div class="col">
                            Sorry, something has gone really wrong!
                            Please let us know what happened.
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <a type="button" class="btn btn-secondary" target="_blank" href="mailto:signo.eth@gmail.com">Drop Us
                        a Mail!</a>
                </div>
            </div>
        </div>
    </div>

    <!--This is the modal for confirming the user wants to delete a certificate-->
    <div class="modal show animated fadeInUpBig" data-backdrop="static" data-keyboard="false" id="deleteConfirmModal"
         tabindex="-1"
         role="dialog" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header bg-danger">
                    <div class="row">
                        <div class="col">
                            <h3 class="modal-title" id="exampleModalLabel">Are you sure?</h3>
                        </div>
                    </div>

                </div>
                <div class="modal-body center-block">
                    <div class="row text-center">
                        <div class="col">
                            <h1><i class="fa fa-5x fa-trash" aria-hidden="true"></i></h1></div>
                    </div>
                    <div class="row">
                        <div class="col">
                            Are you sure you want to delete this certificate? It cannot be undone!
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
                    <button type="button" class="btn btn-primary" target="_blank" id="modalDeleteButtonConfirm">Yes
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!--This is the modal for reminding the user not to close their browser-->
    <div class="modal show animated fadeInUpBig" id="reminderToWaitForMining" tabindex="-1"
         role="dialog" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header bg-info">
                    <div class="row">
                        <div class="col">
                            <h3 class="modal-title" id="exampleModalLabel">Just a sec...</h3>
                        </div>
                    </div>

                </div>
                <div class="modal-body center-block">
                    <div class="row text-center">
                        <div class="col">
                            <h1><i class="fa fa-fw fa-5x fa-refresh fa-spin" aria-hidden="true"></i></h1></div>
                    </div>
                    <div class="row">
                        <div class="col">
                            Please don't close your browser until your certificate has been mined. We'll let you know
                            when this happens.
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-dismiss="modal" target="_blank">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!--This is the modal for No Web 3 injection-->
    <div class="modal show animated fadeInUpBig" data-backdrop="static" data-keyboard="false" id="noWeb3Modal"
         tabindex="-1"
         role="dialog" aria-labelledby="exampleModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header bg-danger">
                    <div class="row text-center">
                        <div class="col">
                            <h3 class="modal-title" id="exampleModalLabel">It appears that you don't have a Web3
                                Client.</h3>
                        </div>
                    </div>

                </div>
                <div class="modal-body center-block">
                    <div class="row text-center">
                        <div class="col">
                            <h1><i class="fa fa-5x fa-ban" aria-hidden="true"></i></h1></div>
                    </div>
                    <div class="row">
                        <div class="col">
                            As this is a distributed app, you need a tool for interacting with the Ethereum Blockchain.
                            Have you tried MetaMask? We highly recommend it!
                        </div>
                    </div>
                </div>
                <div class="modal-footer">

                    <a type="button" class="btn btn-secondary" target="_blank" href="https://metamask.io/">Try
                        MetaMask<img src="https://metamask.io/img/metamask.png" class="pull-right"
                                     style=" padding-left:0.75em; height: 1.5em"></a>
                </div>
            </div>
        </div>
    </div>

    <!--This is the modal for being connected to the wrong network-->
    <div class="modal show animated fadeInUpBig" data-backdrop="static" data-keyboard="false" id="worngNetworkModal"
         tabindex="-1"
         role="dialog" aria-labelledby="exampleModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header bg-warning">
                    <div class="row text-center">
                        <div class="col">
                            <h3 class="modal-title" id="exampleModalLabel">We see that you are connected
                                to {{TemplateVar.get "connectedNetwork"}}. We use Ropsten.</h3>
                        </div>
                    </div>

                </div>
                <div class="modal-body center-block">
                    <div class="row text-center">
                        <div class="col">
                            <h1><i class="fa fa-5x fa-sitemap" aria-hidden="true"></i></h1></div>
                    </div>
                    <div class="row">
                        <div class="col">
                            As we are still in the early stages of development, we are still running on Ropsten testnet.
                            Please change to this network through your Web3 Provider.
                        </div>
                    </div>
                </div>
                <!--<div class="modal-footer">-->
                <!--<button type="button" id="lockModalCloseButton" class="btn btn-primary" data-dismiss="modal">Continue</button>-->
                <!--</div>-->
            </div>
        </div>
    </div>

    <!--This is the modal for web 3 accounts locked injection-->
    <div class="modal show animated fadeInUpBig" data-backdrop="static" data-keyboard="false" id="accountsLockedModal"
         tabindex="-1"
         role="dialog" aria-labelledby="exampleModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header bg-info">
                    <div class="row text-center">
                        <div class="col">
                            <h3 class="modal-title" id="exampleModalLabel">It appears that your Ethereum account is
                                locked</h3>
                        </div>
                    </div>

                </div>
                <div class="modal-body center-block">
                    <div class="row text-center">
                        <div class="col">
                            <h1><i class="fa fa-5x fa-lock" aria-hidden="true"></i></h1></div>
                    </div>
                    <div class="row">
                        <div class="col">
                            Your Web 3 client is running, but your account is locked. You will not be able to create or
                            update certificates, but you can view them. If you want to this functionality, please unlock
                            your account.
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" id="lockModalCloseButton" class="btn btn-primary" data-dismiss="modal">
                        Continue
                    </button>
                </div>
            </div>
        </div>
    </div>

</template>

<template name="WalletBallance">
    <div class="card animated fadeIn">
        <h3 class="card-header">Wallet</h3>
        <div class="card-block">
            <div class="row">
                <div class="col-md-4 col-sm-12">
                    <div class="card card-inverse card-info">
                        <div class="card-block">
                            <div class="row">
                                <div class="col-8">
                                    <h6 class="text-muted text-uppercase font-weight-bold">
                                        Wallet Address
                                    </h6>
                                    <div class="h5 mb-0 addressTextWrap">
                                        {{TemplateVar.get "walletAddress"}}
                                    </div>
                                </div>
                                <div class="col-4 pull-right h1">
                                    <i class="fa fa-fw fa-address-book pull-right" aria-hidden="true"></i>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="col-md-4 col-sm-12">
                    <div class="card card-inverse card-info">
                        <div class="card-block">
                            <div class="row">
                                <div class="col-8">
                                    <h6 class="text-muted text-uppercase font-weight-bold">
                                        Ether Ballance
                                    </h6>
                                    <div class="h5 mb-0 addressTextWrap">
                                        {{TemplateVar.get "walletBallance"}}
                                    </div>
                                </div>
                                <div class="col-4 pull-right h1">
                                    <i class="fa fa-fw fa-money pull-right" aria-hidden="true"></i>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="col-md-4 col-sm-12">
                    <div class="card card-inverse card-info">
                        <div class="card-block">
                            <div class="row">
                                <div class="col-8">
                                    <h6 class="text-muted text-uppercase font-weight-bold">
                                        Certs published
                                    </h6>
                                    <div class="h5 mb-0 addressTextWrap">
                                        {{TemplateVar.get "numberOfCerts"}}
                                    </div>
                                </div>
                                <div class="col-4 pull-right h1">
                                    <i class="fa fa-fw fa-trophy pull-right" aria-hidden="true"></i>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<template name="CandidateSearch">
    <div class="card animated fadeIn">
        <h3 class="card-header">Search</h3>
        <div class="card-block">
            <form class="candidateSearch">
                <div class="row">
                    <div class="col">

                        <ul class="nav nav-tabs" id="myTab" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link active" id="home-tab" data-toggle="tab"
                                   href="#candidateDetailsSearch"
                                   role="tab" aria-controls="home" aria-expanded="true">Candidate details</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="profile-tab" data-toggle="tab" href="#candidateIdSearch"
                                   role="tab"
                                   aria-controls="profile">Candidate ID</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="profile-tab" data-toggle="tab" href="#certificateAddressSearch"
                                   role="tab" aria-controls="profile">Certificate Address</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="profile-tab" data-toggle="tab" href="#issuerAddressSearch"
                                   role="tab" aria-controls="profile">Issuer Address</a>
                            </li>
                        </ul>
                        <div class="tab-content" id="myTabContent">
                            <div class="tab-pane fade show active" id="candidateDetailsSearch" role="tabpanel"
                                 aria-labelledby="home-tab">
                                {{>candidateDetailsSearch}}
                            </div>
                            <div class="tab-pane fade" id="candidateIdSearch" role="tabpanel"
                                 aria-labelledby="profile-tab">
                                {{>candidateIdSearch}}
                            </div>
                            <div class="tab-pane fade" id="certificateAddressSearch" role="tabpanel"
                                 aria-labelledby="home-tab">
                                {{>certificateAddressSearch}}
                            </div>
                            <div class="tab-pane fade" id="issuerAddressSearch" role="tabpanel"
                                 aria-labelledby="profile-tab">
                                {{>issuerAddressSearch}}
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col">
                        <button type="submit" class="btn btn-primary">
                            <i class="fa fa-fw fa-search" aria-hidden="true"></i> Search
                        </button>
                        {{# if searchResults}}
                            <strong class="pull-right">{{commonMetaDataText}}</strong>
                        {{/if}}
                    </div>
                </div>
            </form>
            <div class="row">
                <div class="col">
                    {{> searchResultsList searchResults=searchResults commonMetaData=commonMetaData commonMetaDataText=commonMetaDataText}}
                </div>
            </div>
        </div>
    </div>
</template>

<template name="candidateDetailsSearch">
    <div class="row">
        <div class="col-lg-6">
            <div class="input-group">
                <span class="input-group-addon"><i class="fa fa-fw fa-user" aria-hidden="true"></i></span>
                <input type="text" class="form-control" id="searchCandidateName" name="candidateName"
                       placeholder="Name">
            </div>
        </div>
        <div class="col-lg-6">
            <div class="input-group date">
                                        <span class="input-group-addon">
                                            <i class="fa fa-fw fa-calendar" aria-hidden="true"></i>
                                        </span>
                <input type="text" name="candidateDOB" id='searchCandidateDOB'
                       class="form-control" placeholder="Date of Birth">
            </div>
        </div>

    </div>
</template>

<template name="candidateIdSearch">
    <div class="row">
        <div class="col">
            <div class="input-group {{TemplateVar.get "valid"}}">
                            <span class="input-group-addon"><i class="fa fa-fw fa-id-card" aria-hidden="true"></i>
                            </span>
                <input type="text" class="form-control" id="searchCandidateIDHash"
                       placeholder="ID"
                       aria-label="Candidate ID" aria-describedby="basic-addon1">
            </div>
        </div>
    </div>
</template>

<template name="certificateAddressSearch">
    <div class="row">
        <div class="col">
            <div class="input-group {{TemplateVar.get "valid"}}">
                            <span class="input-group-addon" id="basic-addon1"><i class="fa fa-fw fa-file-text"
                                                                                 aria-hidden="true"></i>
                            </span>
                <input type="text" class="form-control" id="searchCertificateAddress"
                       placeholder="Address"
                       aria-label="Certificate Address" aria-describedby="basic-addon1">
            </div>
        </div>
    </div>
</template>

<template name="issuerAddressSearch">
    <div class="row">
        <div class="col">
            <div class="input-group {{TemplateVar.get "valid"}}">
                            <span class="input-group-addon" id="basic-addon1"><i class="fa fa-fw fa-university"
                                                                                 aria-hidden="true"></i>
                            </span>
                <input type="text" class="form-control" id="searchCertificateIssuer"
                       placeholder="Certificate Issuer"
                       aria-label="Certificate Issuer" aria-describedby="basic-addon1">
            </div>
        </div>
    </div>
</template>

<template name="searchResultsList">
    {{#if searchResults}}
        <div class="card-columns">
            {{#each result in searchResults}} {{#with result}}
                {{> ChildCertificate resultCertificateAddress=certificateAddress resultTimeStamp=timeStamp issuerMetaData=issuerMetaData}}
            {{/with}} {{/each}}
        </div>
    {{/if}}
</template>

<template name="ChildCertificate">
    {{#unless TemplateVar.get "isDeleted"}}
        <!--<div class="col-xl-4 col-lg-6">-->
        <div class="card animated fadeInUpBig">
            <div class="card-header">
                <h5>{{TemplateVar.get "name"}}
                    {{>injectJqueryTooltip}}
                    {{#if TemplateVar.get "anonymous"}}
                        <a tabindex="0" id="searchResultCard" class="badge badge-default pull-right"
                           data-toggle="tooltip"
                           data-placement="top"
                           title="This user chose not to have their information displayed.">
                            <h5 style="padding: 0px; margin: 0px">
                                <i class="fa fa-eye-slash" aria-hidden="true"></i>
                            </h5>
                        </a>
                    {{/if}}
                </h5>
            </div>
            <div class="card-block addressTextWrap">
                <div class="row">
                    <div class="col">
                        <table class="table">
                            <tbody>
                            {{#each objectToPairs (TemplateVar.get "sundryData")}}
                                <tr>
                                    <td style="width:35%"><b>{{key}}</b></td>
                                    <td>{{value}}</td>
                                </tr>
                            {{/each}}
                            </tbody>
                        </table>
                    </div>
                </div>


            </div>
            <div class="card-footer pl-8 pr-8" style="padding-top: 8px; padding-bottom: 8px">

                <div class="row pt-1 mt-0">
                    <div class="col pull-left">
                        <small class="text-muted pull-left">Added: <strong><br> {{formatDate resultTimeStamp}}</strong>
                        </small>
                    </div>


                    <div class="col-2">
                        {{>injectJqueryPopover}}
                        {{#if TemplateVar.get "issuerMetaData"}}
                            <a tabindex="0" class="badge badge-default pop pull-right" data-toggle="popover"
                               data-placement="bottom"
                               title="Number of certificates issued by issuer"
                               data-content="{{TemplateVar.get "issuerMetaData"}}">
                                <h5 style="padding: 0px; margin: 0px">
                                    <i class="fa fa-fw fa-hashtag" aria-hidden="true"></i>
                                </h5>
                            </a>
                        {{/if}}
                    </div>
                    <div class="col-2">
                        <a tabindex="0" class="badge badge-default pop pull-right" data-toggle="popover"
                           data-placement="bottom"
                           title="Certificate public address"
                           data-content="{{TemplateVar.get "certificateAddress"}}">
                            <h5 style="padding: 0px; margin: 0px">
                                <i class="fa fa-fw fa-certificate" aria-hidden="true"></i>
                            </h5>
                        </a>
                    </div>
                    <div class="col-2">
                        <a tabindex="0" class="badge badge-default pop pull-right" data-toggle="popover"
                           data-placement="bottom"
                           title="Candidate ID" data-content="{{TemplateVar.get "idHash"}}">
                            <h5 style="padding: 0px; margin: 0px">
                                <i class="fa fa-fw fa-id-card" aria-hidden="true"></i>
                            </h5>
                        </a>
                    </div>
                    <div class="col-2">
                        <a tabindex="0" class="badge badge-default pop pull-right" data-toggle="popover"
                           data-placement="bottom"
                           title="Issuer Address" data-content="{{TemplateVar.get "certificateIssuer"}}">
                            <h5 style="padding: 0px; margin: 0px">
                                <i class="fa fa-fw fa-university" aria-hidden="true"></i>
                            </h5>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!--</div>-->
    {{/unless}}
</template>

<template name="DeleteCertificate">
    <div class="card animated fadeIn">
        <h3 class="card-header">Remove</h3>
        <div class="card-block">
            {{> DeleteCertificateForm}}
        </div>
    </div>
</template>

<template name="DeleteCertificateForm">
    <div class="row">
        <div class="col">
            <form id="deleteCertificateForm">
                <div class="form-group {{TemplateVar.get "valid"}}">
                    <label class="form-control-label" for="deleteCertificateAddress">
                        Input Certificate address
                    </label>
                    <input type="text" class="form-control form-control-success" id="deleteCertificateAddress"
                           name="certificateAddress"
                           placeholder="0x0123456789abcdef012345679abcdef0123456"/>
                </div>
                <button type="button" id="deleteCertificateButton" class="btn btn-danger">
                    <i class="fa fa-fw fa-trash" aria-hidden="true"></i> Remove
                </button>
            </form>
        </div>
    </div>
</template>

<template name="UpdateCertificate">
    <div class="card animated fadeIn">
        <h3 class="card-header">Change</h3>
        <div class="card-block">
            {{> UpdateCertificateForm}}
        </div>
    </div>
</template>

<template name="UpdateCertificateForm">
    <div class="row">
        <div class="col">
            <form id="updateCertificateForm">
                <div class="form-group {{TemplateVar.get "valid"}}">
                    <label class="form-control-label" for="updateAddress">
                        Input Certificate address
                    </label>
                    <input type="text" class="form-control form-control-success" id="updateAddress"
                           name="certificateAddress"
                           placeholder="0x0123456789abcdef012345679abcdef0123456"/>
                </div>
                <button type="submit" id="findCertificate" class="btn btn-primary">
                    <i class="fa fa-fw fa-search" aria-hidden="true"></i> Find
                </button>
            </form>
        </div>
    </div>
    <div class="row">
        <div class="col">
            {{#if updateCertificateSearchResults}}
                {{>UpdateCertificateFormChild updateCertificateSearchResults=updateCertificateSearchResults}}
            {{/if}}
        </div>
    </div>
</template>

<template name="UpdateCertificateFormChild">
    {{#if (TemplateVar.get "json")}}
        {{>UpdateCertificateFormChildChild json=(TemplateVar.get "json")}}
        <button type="submit" id="update" class="btn btn-primary">
            <i class="fa fa-fw fa-wrench" aria-hidden="true"></i> Change
        </button>
    {{/if}}
</template>

<template name="UpdateCertificateFormChildChild">
    <table class="table">
        <thead>
        <tr>
            <th style="width:30%">
                <strong>
                    Field
                </strong>
            </th>
            <th style="width:auto; padding-bottom: 11px">
                <strong>
                    Value
                </strong>
            </th>
        </tr>
        </thead>
        <tbody>
        {{#each inputs}}
            {{> inputFields}}
        {{/each}}
        </tbody>
        <tfoot>
        <tr>
            <td colspan="2">
                <button id='add-input' class="btn btn-secondary rounded" {{TemplateVar.get "addNewFieldButtonStatus"}}>
                    <i class="fa fa-fw fa-plus" aria-hidden="true"></i>
                </button>
                <div class="pull-right" style="padding-top: 4px">
                    <strong class="text-muted">
                        Anonymous certificate
                    </strong>
                    <label class="switch switch-text switch-pill switch-secondary">
                        <input type="checkbox" class="switch-input" id="anonymousUpdate" {{updateCheckboxAnonymous}}>
                        <span class="switch-label" data-on="On" data-off="Off"></span>
                        <span class="switch-handle"></span>
                    </label>
                </div>
            </td>
        </tr>
        </tfoot>
    </table>
</template>

<template name="createCertificate">
    <div class="card animated fadeIn">
        <h3 class="card-header">Create</h3>
        <div class="card-block">
            <select name="certificatesTemplates" id="certificatesTemplates"
                    class="form-control">
                {{#each template in certificatesTemplates}}
                    <option value="{{template.id}}">{{template.name}}</option>
                {{/each}}
            </select>
            <table class="table">

                <tbody>
                {{#each inputs}}
                    {{> inputFields}}
                {{/each}}
                </tbody>
                <tfoot>
                <tr>
                    <td colspan="2">
                        <button id='add-input' class="btn btn-secondary rounded" {{TemplateVar.get
                                "addNewFieldButtonStatus"}}>
                            <i class="fa fa-fw fa-plus" aria-hidden="true"></i>
                        </button>
                        <div class="pull-right" style="padding-top: 4px">
                            <strong class="text-muted">
                                Anonymous certificate
                            </strong>
                            <label class="switch switch-text switch-pill switch-secondary">
                                <input type="checkbox" class="switch-input" id="anonymousCreate">
                                <span class="switch-label" data-on="On" data-off="Off"></span>
                                <span class="switch-handle"></span>
                            </label>
                        </div>
                    </td>
                </tr>
                </tfoot>
            </table>
            <button type="submit" id="createCertificate" class="btn btn-primary">
                <i class="fa fa-fw fa-pencil" aria-hidden="true"></i> Create
            </button>
        </div>
    </div>
</template>

<template name='inputFields'>
    <tr class="animated fadeIn">
        <td style="width: 30%">
            <input name='inputKey' class='form-control' type='text' uniqid="{{uniqid}}" maxlength="60"
                   value="{{keyValue}}" {{readOnly}}>
        </td>
        <td>
            <div class="input-group {{type}}">
                <input name='inputValue' class='form-control' type='text' uniqid="{{uniqid}}" id="{{uniqid}}"
                       value="{{value}}" maxlength="140">
                <span class="input-group-btn">
                    {{#if readOnly}}
                        <button id="remove-input" uniqid="{{uniqid}}" class="btn btn-link rounded"
                                style="cursor: not-allowed" aria-disabled="true" disabled>
                        <i class="fa fa-fw fa-trash" aria-hidden="true"></i>
                        </button>
                    {{/if}}
                    {{#unless readOnly}}
                        <button id="remove-input" uniqid="{{uniqid}}" class="btn btn-danger rounded">
                        <i class="fa fa-fw fa-trash" aria-hidden="true"></i></button>
                    {{/unless}}
                </span>
            </div>
        </td>
    </tr>
</template>

<template name="injectJqueryPopover">

</template>

<template name="injectJqueryTooltip">

</template>